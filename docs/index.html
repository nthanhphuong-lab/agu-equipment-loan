<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>Quản lý thiết bị</title>
<style>
.hidden{display:none;}
.card{border:1px solid #ccc; padding:8px; margin:6px; border-radius:4px;}
.status-pending{color:orange;}
.status-approved{color:green;}
.status-rejected{color:red;}
.status-returned{color:blue;}
.admin-only{display:none;}
#userRoleTag.admin{color:red;} #userRoleTag.user{color:green;}
.tab-btn.active{font-weight:bold;}
</style>
</head>
<body>

<!-- ========== LOGIN AREA ========== -->
<div id="loginArea">
  <h2>Đăng nhập</h2>
  <button id="btnGoogleLogin">Đăng nhập Google</button>
  <p>Hoặc test local:</p>
  <input type="email" id="localEmail" placeholder="Email">
  <input type="password" id="localPass" placeholder="Mật khẩu">
  <button id="btnLocalSignup">Tạo tài khoản test</button>
  <button id="btnLocalLogin">Đăng nhập test</button>
  <p id="loginMessage" style="color:red"></p>
  <p id="localMsg" style="color:blue"></p>
</div>

<!-- ========== USER INFO & MENU ========== -->
<div id="userInfo" class="hidden">
  <p>Đang đăng nhập: <span id="userEmail"></span> <span id="userRoleTag"></span>
  <button id="btnLogout">Đăng xuất</button></p>
  
  <nav id="mainNav" class="hidden">
    <button class="tab-btn" data-page="page-devices">Danh sách thiết bị</button>
    <button class="tab-btn" data-page="page-create-loan">Tạo yêu cầu mượn</button>
    <button class="tab-btn" data-page="page-my-loans">Yêu cầu của tôi</button>
    <button class="tab-btn admin-only" data-page="page-admin-eq">Quản lý thiết bị (Admin)</button>
    <button class="tab-btn admin-only" data-page="page-admin-loans">Quản lý yêu cầu mượn (Admin)</button>
  </nav>
</div>

<!-- ========== PAGES ========== -->
<div id="pages">

  <!-- DANH SÁCH THIẾT BỊ (USER) -->
  <div id="page-devices" class="page hidden">
    <h3>Danh sách thiết bị</h3>
    <div id="equipmentList"></div>
  </div>

  <!-- TẠO YÊU CẦU MƯỢN -->
  <div id="page-create-loan" class="page hidden">
    <h3>Tạo yêu cầu mượn</h3>
    <label>Thiết bị:
      <select id="loanEqSelect"><option>-- chọn --</option></select>
    </label><br>
    <label>Số lượng: <input type="number" id="loanQty" min="1"></label><br>
    <label>Ngày mượn: <input type="date" id="loanStart"></label><br>
    <label>Ngày trả dự kiến: <input type="date" id="loanDue"></label><br>
    <label>Ghi chú: <input type="text" id="loanNote"></label><br>
    <button id="btnCreateLoan">Gửi yêu cầu mượn</button>
    <p id="loanCreateMsg" style="color:green"></p>
  </div>

  <!-- YÊU CẦU CỦA TÔI (USER) -->
  <div id="page-my-loans" class="page hidden">
    <h3>Yêu cầu của tôi</h3>
    <div id="myLoans"></div>
  </div>

  <!-- QUẢN LÝ THIẾT BỊ (ADMIN) -->
  <div id="page-admin-eq" class="page hidden admin-only">
    <h3>Quản lý thiết bị (Admin)</h3>
    <label>Tên: <input type="text" id="eqName"></label><br>
    <label>Mã: <input type="text" id="eqCode"></label><br>
    <label>Số lượng: <input type="number" id="eqQty" min="1"></label><br>
    <label>Mô tả: <input type="text" id="eqDesc"></label><br>
    <button id="btnAddEq">Thêm thiết bị</button>
    <div id="equipmentListAdmin"></div>
  </div>

  <!-- QUẢN LÝ YÊU CẦU MƯỢN (ADMIN) -->
  <div id="page-admin-loans" class="page hidden admin-only">
    <h3>Quản lý yêu cầu mượn (Admin)</h3>
    <div id="allLoans"></div>
  </div>

</div>

<script type="module" src="main.js"></script>

</body>
</html>
