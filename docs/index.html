<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <title>Quáº£n lÃ½ mÆ°á»£n tráº£ thiáº¿t bá»‹ - AGU</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;max-width:980px;margin:24px auto;padding:0 12px;line-height:1.4}
    h1{margin:0 0 8px}
    .hidden{display:none}
    .card{border:1px solid #e5e7eb;border-radius:10px;padding:10px;margin:8px 0;background:#fff}
    input,select,button{padding:6px 8px;margin:2px;border:1px solid #d1d5db;border-radius:8px}
    button{cursor:pointer}
    .tag{display:inline-block;padding:2px 8px;border-radius:999px;font-size:12px;margin-left:6px}
    .tag.user{background:#eee}
    .tag.admin{background:#111;color:#fff}
    .status-pending{color:#b45309}
    .status-approved{color:#065f46}
    .status-rejected{color:#991b1b}
    .status-returned{color:#2563eb}
    .toast{position:fixed;right:16px;bottom:16px;background:#111;color:#fff;padding:10px 14px;border-radius:10px;opacity:.95}
    nav{margin:12px 0;display:flex;gap:8px;flex-wrap:wrap}
    .tab-btn{padding:6px 10px;border:1px solid #ddd;border-radius:8px;background:#f8f8f8;cursor:pointer}
    .tab-btn.active{background:#111;color:#fff}
    .page{margin-top:8px}
    .muted{color:#6b7280}
    .grid{display:grid;gap:8px}
    .grid-cols-4{grid-template-columns:repeat(4,1fr)}
  </style>
</head>
<body>
  <h1>Quáº£n lÃ½ mÆ°á»£n tráº£ thiáº¿t bá»‹ - AGU</h1>
  <p class="muted">ÄÄƒng nháº­p báº±ng tÃ i khoáº£n <b>@agu.edu.vn</b>. Dá»¯ liá»‡u lÆ°u trÃªn Firebase, cháº¡y full trÃªn GitHub Pages.</p>

  <!-- Khu Ä‘Äƒng nháº­p -->
  <div id="loginArea">
    <button id="btnGoogleLogin">ÄÄƒng nháº­p vá»›i Google @agu.edu.vn</button>
    <p id="loginMessage" class="status-rejected"></p>
  </div>

  <!-- ThÃ´ng tin ngÆ°á»i dÃ¹ng -->
  <div id="userInfo" class="hidden">
    Äang Ä‘Äƒng nháº­p: <b id="userEmail"></b>
    <span id="userRoleTag" class="tag user">USER</span>
    <button id="btnLogout">ÄÄƒng xuáº¥t</button>
  </div>

  <!-- MENU -->
  <nav id="mainNav" class="hidden">
    <button class="tab-btn" data-page="page-dashboard">Tá»•ng quan</button>
    <button class="tab-btn admin-only" data-page="page-admin-eq">Quáº£n lÃ½ thiáº¿t bá»‹ (Admin)</button>
    <button class="tab-btn" data-page="page-devices">Danh sÃ¡ch thiáº¿t bá»‹</button>
    <button class="tab-btn" data-page="page-create-loan">Táº¡o yÃªu cáº§u mÆ°á»£n</button>
    <button class="tab-btn" data-page="page-my-loans">YÃªu cáº§u cá»§a tÃ´i</button>
    <button class="tab-btn admin-only" data-page="page-admin-loans">Quáº£n lÃ½ yÃªu cáº§u (Admin)</button>
  </nav>

  <!-- DASHBOARD -->
  <section id="page-dashboard" class="page hidden">
    <h2>ğŸ“Š Tá»•ng quan</h2>
    <div id="dashboardStats" class="grid grid-cols-4">
      <div class="card"><b>Tá»•ng thiáº¿t bá»‹</b><br><span id="statTotalDevices">0</span></div>
      <div class="card"><b>Äang sáºµn sÃ ng</b><br><span id="statAvailableDevices">0</span></div>
      <div class="card"><b>YÃªu cáº§u Ä‘ang chá»</b><br><span id="statPendingRequests">0</span></div>
      <div class="card"><b>YÃªu cáº§u Ä‘Ã£ duyá»‡t</b><br><span id="statApprovedRequests">0</span></div>
    </div>
    <canvas id="dashboardChart" height="100"></canvas>
  </section>

  <!-- CÃ¡c trang khÃ¡c -->
  <section id="page-admin-eq" class="page hidden"><h3>Quáº£n lÃ½ thiáº¿t bá»‹ (Admin)</h3><div id="equipmentListAdmin"></div></section>
  <section id="page-devices" class="page hidden"><h3>Danh sÃ¡ch thiáº¿t bá»‹</h3><div id="equipmentList"></div></section>
  <section id="page-create-loan" class="page hidden"><h3>Táº¡o yÃªu cáº§u mÆ°á»£n</h3><div id="createLoanForm"></div></section>
  <section id="page-my-loans" class="page hidden"><h3>YÃªu cáº§u cá»§a tÃ´i</h3><div id="myLoans"></div></section>
  <section id="page-admin-loans" class="page hidden"><h3>Quáº£n lÃ½ yÃªu cáº§u mÆ°á»£n</h3><div id="allLoans"></div></section>

  <script type="module" src="./main.js"></script>
</body>
</html>
